<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxd.zcloud.dao.UserMapper">

	<!-- user的resultMap映射，不映射用户创建的文件，但映射用户创建的文件夹，后续通过文件夹来查询文件 -->
	<resultMap id="BaseResultMap" type="com.zxd.zcloud.pojo.User">
		<id column="id" jdbcType="INTEGER" property="id" />
		<result column="username" jdbcType="VARCHAR" property="username" />
		<result column="password" jdbcType="VARCHAR" property="password" />
		<result column="createtime" jdbcType="TIMESTAMP" property="createtime" />
		
		<collection property="folders" ofType="com.zxd.zcloud.pojo.Folder">
			<id column="fid" jdbcType="INTEGER" property="id"/>
			<result column="folder_name" jdbcType="VARCHAR" property="foldername" />
			<result column="folder_createtime" jdbcType="TIMESTAMP" property="createtime" />
			
			<association property="folder_parent" javaType="com.zxd.zcloud.pojo.Folder">
				<id column="fpid" jdbcType="INTEGER" property="id"/>
				<result column="folder_parent_name" jdbcType="VARCHAR" property="foldername" />
				<result column="folder_parent_createtime" jdbcType="TIMESTAMP" property="createtime" />
			</association>
		</collection>
	</resultMap>
	
	<insert id="insertSelective">
		insert into user
	    <trim prefix="(" suffix=")" suffixOverrides=",">
	      <if test="id != null">
	        id,
	      </if>
	      <if test="username != null">
	        username,
	      </if>
	      <if test="password != null">
	        password,
	      </if>
	      <if test="createtime != null">
	        createtime,
	      </if>
	    </trim>
	    <trim prefix="values (" suffix=")" suffixOverrides=",">
	      <if test="id != null">
	        #{id,jdbcType=INTEGER},
	      </if>
	      <if test="username != null">
	        #{username,jdbcType=VARCHAR},
	      </if>
	      <if test="password != null">
	        #{password,jdbcType=VARCHAR},
	      </if>
	      <if test="createtime != null">
	        #{createtime,jdbcType=TIMESTAMP},
	      </if>
	    </trim>
	</insert>

 
</mapper>